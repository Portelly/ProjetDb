/*! 
 * ZIFF DAVIS Comparative Shopping Engine - ZDCSE.JS - v4.1.8 - 2013-02-07 12:18:17 PM
 * Copyright (c) 2013 ZIFF DAVIS, INC. All Rights Reserved.
 * 
 * parseUri 1.2.2 (c) Steven Levithan stevenlevithan.com MIT License
 */
var ZIFFDAVIS=ZIFFDAVIS||{log:function(a){window.console&&(typeof a=="object"&&window.console.dir?window.console.dir(a):window.console.log(a))},getScriptElem:function(a){var b=ZIFFDAVIS.log,c,d,e=document.getElementsByTagName("script");for(c=0,d=e.length;c<d;c++)if(e[c].src.match(a))return e[c];return b("getScriptElem error! Script not found."),null},parseUri:function(a,b){var c={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},d=c.parser[b||"loose"].exec(a),e={},f=14;while(f--)e[c.key[f]]=d[f]||"";return e[c.q.name]={},e[c.key[12]].replace(c.q.parser,function(a,b,d){b&&(e[c.q.name][b]=d)}),e},injectScript:function(a){var b=ZIFFDAVIS.log,c=document.createElement("script"),d=a.to;if(a.url)c.src=a.url;else{b("Can't load script; no script URL!");return}c.onload=c.onreadystatechange=function(){if(!c.readyState||/loaded|complete/.test(c.readyState))c.onload=c.onreadystatechange=null,c=undefined,typeof a.callback=="function"&&a.callback()},d&&d.insertBefore?d.insertBefore(c,d.firstChild):b("node not found or has no insertBefore method! Can't load script from: '"+a.url+"'")}};typeof ZIFFDAVIS.cse=="undefined"&&(ZIFFDAVIS.cse=function(){function t(b){var c=[];return a.each(b,function(a,b){c.push(a+"Id="+b.join(","))}),a.ajax({url:g+h+i+"?"+c.join("&"),jsonpCallback:j,dataType:"jsonp",cache:!0})}function u(a){var c={xx_nextag:function(a){var c=window.encodeURIComponent,d=b.parseUri(a),e="zdcse:",f=c(document.location.pathname),g;return d.host==="prf.hn"?(g=d.path.split("/"),g.splice(3,0,"pubref:"+c(e)+f),"http://prf.hn"+g.join("/")+c("&t="+e)+f):a+"&t="+c(e)+f}},d=a.Provider.toLowerCase();return c[d]?c[d](a.Url):a.Url}function v(c){if(typeof c=="undefined"||c.error)return;a.each(c,function(c,d){var e=c.toLowerCase();b.cse.tags.filter("[data-affiliate-"+e+"]").each(function(){var b=a(this),c=b.attr("data-affiliate-"+e),f=a.extend({},s,d[c]);f&&(f.productId=c,y(b,f))})})}function w(a){var b=[];for(var c in a)c.toLowerCase()!=="url"&&typeof a[c]=="string"&&b.push({name:c,value:a[c]});return b}function x(b){var c="http://zdbb.net/l/NDgzOWJiYWMtMDJhMy0xMQ?provider="+encodeURIComponent(b.Provider.toLowerCase())+"&productid="+encodeURIComponent(b.ProviderProductId)+"&price="+encodeURIComponent(b.Price)+"&merchant="+encodeURIComponent(b.Vendor.toLowerCase())+"&ziffcatId="+encodeURIComponent(b.ZiffcatId)+"&guid="+encodeURIComponent(b.Guid),d=a('<img width="1" height="1" border="0">');d.attr("src",c),a("body").append(d)}function y(b,c){if(c.Vendor&&c.Price){var d=Math.floor(Math.random()*2147483648).toString(36)+"_"+c.productId,e=a('<span class="'+f+'-wrapper" id="'+f+"_"+d+'" />'),g=b.data("prependChars"),h=b.data("appendChars"),i=u(c);b.click(function(a){a.preventDefault(),x(c),window.open(i)}),b.html(z(b.html(),c)).wrap(e).attr({href:"http://contextual.ziffdavis.com",rel:"nofollow",title:z(b.attr("title"),c)});var j=w(c);a.each(j,function(){b.attr("data-commerce-"+this.name,this.value)}),b.show(),b.hasClass("zdcse-block")&&b.parent().css("display","block")}}function z(a,b){return typeof a=="string"?a.replace(p[k],b.Price).replace(p[l],b.Vendor).replace(p[m],b.ProductName).replace(p[n],b.MSRP).replace(p[o],b.CouponCode):a}function A(a,b){var c=a.split("."),d=c.pop();for(var e=0;e<c.length;e++){b=b[c[e]];if(typeof b=="undefined")return null}return b[d]}var a,b=ZIFFDAVIS,c=b.getScriptElem(/zdcse(\.min)?\.js[^\/]*$/ig),d=c?b.parseUri(c.src):null,e=d?d.queryKey:null,f="zdcse",g=document.location.protocol==="https"?"https://":"http://",h="cse.adziff.com",i="/CSE/BestPrice",j="__zdcse__callback",k=0,l=1,m=2,n=3,o=4,p=["%displayPrice%","%seller%","%productName%","%MSRP%","%couponCode%"],q=p[k]+" at "+p[l],r="Get the "+p[m]+" from "+p[l]+" for "+p[k],s={Price:"",ProductName:"",ProviderProductId:"",Vendor:"",Url:"",Provider:"",Manufacturer:"",Logo:"",MSRP:"",CouponCode:""};e.qa==="true"&&(h="qa.cse.adziff.com"),e.local==="true"&&(h="localhost:57090");var B=function(c){b.cse.$=a=c||window.jQuery.noConflict(),typeof window.__zdcseOriginalJquery!="undefined"&&(window.jQuery=window.$=window.__zdcseOriginalJquery),a(document).ready(function(){var c=b.cse.tags=a("a."+f),d={};c.each(function(){var b=a(this);b.hide(),b.text()||b.text(q),b.attr("title")||b.attr("title",r),a.each(b.data(),function(b,c){if(b.indexOf("affiliate")!==-1&&typeof c=="number"){var e=b.split("affiliate")[1].toLowerCase();d[e]?a.inArray(c,d[e])===-1&&d[e].push(c):d[e]=[c]}})}),t(d).done(function(a){v(a);if(e.onload){var c=A(e.onload,window);typeof c=="function"&&c(b.cse.tags.get())}})})};return{init:B}}(),!window.jQuery||window.jQuery&&parseFloat(window.jQuery.fn.jquery)<1.7?(window.jQuery&&(window.__zdcseOriginalJquery=jQuery),ZIFFDAVIS.injectScript({url:"http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js",to:document.getElementsByTagName("body")[0],callback:ZIFFDAVIS.cse.init})):ZIFFDAVIS.cse.init(window.jQuery));